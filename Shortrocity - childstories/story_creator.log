2024-11-01 12:46:35,830 - INFO - Starting story processing
2024-11-01 12:46:35,830 - DEBUG - Created/verified processed directory: D:\prac\CursorAI projs\Shortrocity - childstories\data\processed_data\stories
2024-11-01 12:47:33,913 - INFO - Starting story processing
2024-11-01 12:47:33,914 - DEBUG - Created/verified processed directory: D:\prac\CursorAI projs\Shortrocity - childstories\data\processed_data\stories
2024-11-01 12:47:33,914 - INFO - Found 62 stories to process
2024-11-01 12:47:33,914 - INFO - Processing story file: amusing_armadillo.json
2024-11-01 12:47:33,914 - DEBUG - Created story directory: D:\prac\CursorAI projs\Shortrocity - childstories\data\processed_data\stories\amusing_armadillo
2024-11-01 12:47:33,915 - DEBUG - Copied original story file to: D:\prac\CursorAI projs\Shortrocity - childstories\data\processed_data\stories\amusing_armadillo\amusing_armadillo.json

2024-11-01 12:47:33,915 - DEBUG - Generating consistent scene descriptions for story: amusing_armadillo

2024-11-01 12:47:33,915 - INFO - Starting scene consistency generation for story: The Amusing Armadillo
2024-11-01 12:47:33,915 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-11-01 12:47:33,916 - DEBUG - load_verify_locations cafile='C:\\Users\\ROG\\.conda\\envs\\captacity\\Library\\ssl\\cacert.pem'
2024-11-01 12:47:34,035 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'beta.chat.completions.parse'}, 'files': None, 'post_parser': <function Completions.parse.<locals>.parser at 0x0000018ADC90FF60>, 'json_data': {'messages': [{'role': 'system', 'content': '\n    You are an expert prompt engineer. Your task is to create detailed and elaborate prompts for character and scene setups in a story. The prompts you create will be used to generate images for the story.\n    '}, {'role': 'user', 'content': '\n    Given the context below, generate detailed prompts for character and scene setups. Consistency in character and scene descriptions is crucial for creating accurate images for any story.\n    Your prompts should capture the complete description of characters and the scene of the story. An image generation model can only produce high-quality images if it has a well-crafted prompt to work with.\n    Here is the context of the story:\n    --\n    Story Title: The Amusing Armadillo\nIn the heart of the sunbaked desert lived an armadillo named Andy, known for his unique sense of humor. Unlike his peers who preferred the quiet life, Andy loved making the desert creatures laugh with his clever tricks and witty banter.\n\n    ---\n    \n    Now give me these in json format:\n    {\n        "characters": [\n            {\n                "character_name": "name",\n                "description": "description",\n                "appearance": "appearance"\n            },\n            ...\n        ],\n        "scene_details": {\n            "description": "description",\n            "setting": "setting",\n            "mood": "mood",\n            "time_of_day": "time_of_day"\n        },\n        "image_style": "the style of the image to create"\n    }\n    \n    Please make sure you only return valid JSON. Do not include any other text not even the word JSON  as your output will be loaded into a json.\n    '}], 'model': 'gpt-4o-mini', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'characters_description': {'title': 'Characters Description', 'type': 'string'}, 'scene_details': {'title': 'Scene Details', 'type': 'string'}, 'image_style': {'title': 'Image Style', 'type': 'string'}}, 'required': ['characters_description', 'scene_details', 'image_style'], 'title': 'Setup', 'type': 'object', 'additionalProperties': False}, 'name': 'Setup', 'strict': True}}, 'stream': False}}
2024-11-01 12:47:34,063 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-11-01 12:47:34,064 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-11-01 12:47:34,225 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000018ADC945640>
2024-11-01 12:47:34,226 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000018ADC924E50> server_hostname='api.openai.com' timeout=5.0
2024-11-01 12:47:34,337 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000018ADC6EEE40>
2024-11-01 12:47:34,338 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-11-01 12:47:34,338 - DEBUG - send_request_headers.complete
2024-11-01 12:47:34,339 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-11-01 12:47:34,339 - DEBUG - send_request_body.complete
2024-11-01 12:47:34,339 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-11-01 12:47:37,304 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 01 Nov 2024 07:47:36 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-oxujjlh0hncofhfy2iarhvkl'), (b'openai-processing-ms', b'2320'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'2000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'1999580'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'12ms'), (b'x-request-id', b'req_043efd400b5e345809f34ca86842b3ab'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=98g6NH5vxQNO4QORkxNjkINL83HlkeTA3I2v2KTYLqI-1730447256-1.0.1.1-kDsJ1hBL2qDs9.mSNgew2LntRdDfBwAoqNpDeRNuhchoR8kbta8Jb.UaIOGO2zZGQK3hB_ay7mVPBPBL3VFSyw; path=/; expires=Fri, 01-Nov-24 08:17:36 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=6xMvHMe_lyrGqN3VIPbeYgF6r_2XIatVClzhdV_RcAM-1730447256775-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8dba4708fc5f4bda-SIN'), (b'Content-Encoding', b'br'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-11-01 12:47:37,305 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-01 12:47:37,305 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-11-01 12:47:37,305 - DEBUG - receive_response_body.complete
2024-11-01 12:47:37,306 - DEBUG - response_closed.started
2024-11-01 12:47:37,306 - DEBUG - response_closed.complete
2024-11-01 12:47:37,306 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Fri, 01 Nov 2024 07:47:36 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-oxujjlh0hncofhfy2iarhvkl'), ('openai-processing-ms', '2320'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '2000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '1999580'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '12ms'), ('x-request-id', 'req_043efd400b5e345809f34ca86842b3ab'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=98g6NH5vxQNO4QORkxNjkINL83HlkeTA3I2v2KTYLqI-1730447256-1.0.1.1-kDsJ1hBL2qDs9.mSNgew2LntRdDfBwAoqNpDeRNuhchoR8kbta8Jb.UaIOGO2zZGQK3hB_ay7mVPBPBL3VFSyw; path=/; expires=Fri, 01-Nov-24 08:17:36 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=6xMvHMe_lyrGqN3VIPbeYgF6r_2XIatVClzhdV_RcAM-1730447256775-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8dba4708fc5f4bda-SIN'), ('content-encoding', 'br'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-11-01 12:47:37,306 - DEBUG - request_id: req_043efd400b5e345809f34ca86842b3ab
2024-11-01 12:47:37,316 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'X-Stainless-Helper-Method': 'beta.chat.completions.parse'}, 'files': None, 'post_parser': <function Completions.parse.<locals>.parser at 0x0000018ADC90FF60>, 'json_data': {'messages': [{'role': 'system', 'content': "You are an expert story consistency creator specializing in children's literature and visual storytelling. Your role is to:\n- Maintain strict visual consistency in character appearances, settings, and objects across all story scenes\n- Ensure descriptions have the right level of detail for image generation while staying true to the story's tone\n- Pay special attention to key identifying features like colors, sizes, shapes and textures\n- Consider lighting, perspective and mood to create visually engaging scenes\n- Keep track of any established visual elements and reference them appropriately\n- Focus on making scenes that will resonate with young readers while supporting the narrative\n- Provide clear, specific details that can be accurately translated into images\n- ALWAYS include the style of image to create.\ni will provide you with an existing image description for each story moment, You have to fix them according the instructions provided here and the image guide provided below.\n"}, {'role': 'user', 'content': '\n    Based on this story context:\n    --\n    Story Title: The Amusing Armadillo\nIn the heart of the sunbaked desert lived an armadillo named Andy, known for his unique sense of humor. Unlike his peers who preferred the quiet life, Andy loved making the desert creatures laugh with his clever tricks and witty banter.\n\n    --\n    and this image guide:\n    --\n    {"characters_description":"Andy, the armadillo, has a playful personality, characterized by a broad smile and twinkling eyes that reflect his mischievous spirit. He has a light brown shell that appears polished under the sun, adorned with subtle patterns that mimic the ripples of sand. His underbelly is a lighter beige, and his sturdy legs are small but strong, allowing him to break into a quick scamper when performing his tricks. Andy wears a tiny straw hat that adds to his comedic flair, and his accentuated eyebrows give him an animated expression, enhancing his witty remarks. His bushy tail curls in excitement whenever he shares a joke.","scene_details":"The scene is set in a vibrant desert landscape with rolling sand dunes and scattered cacti, creating a picturesque backdrop. It’s midday, and the sun blazes down, casting soft shadows. A group of desert animals, including a curious fox, a wise tortoise, and a few nimble lizards, surround Andy, eagerly anticipating his next joke. The mood is light and cheerful, filled with the sounds of laughter and mirth, as Andy prepares to perform his latest trick, adding a splash of humor to the dry, arid setting.","image_style":"whimsical and colorful, resembling a playful cartoon style that captures the lively essence of Andy’s character and the desert ambiance"}\n    --\n    Here are the existing image descriptions for each story moment:\n    --\n    Image 1: A sunlit desert landscape with a small, quirky armadillo rolling into a ball. The armadillo\'s shell is patterned with humorous symbols and it wears a playful grin. In the background, cacti and small desert flowers add bursts of color to the sandy terrain.\nImage 3: Andy the Armadillo performing a comedic act in front of an audience of desert animals. A coyote chuckles, a rabbit claps, and a group of lizards giggle at his antics. Andy stands on a small rock, using a cactus as a makeshift microphone.\nImage 5: Michael and Andy exploring the desert, with Michael taking notes in his journal and Andy pointing out interesting sights. Their path is marked by small, humorous signs Andy has placed to make Michael laugh, like \'Beware of tickling cacti!\'\nImage 7: A heartwarming scene under the starry desert sky. Michael and Andy sit by a campfire, sharing stories and roasting marshmallows. The sky is a brilliant tapestry of stars, and the gentle glow of the fire illuminates their smiling faces.\n\n    \n    The prompt you generate will be taken as a prompts for an image generation model so be as descriptive as possible, closely align with the image guide.\n    Ensure the prompt is optimized for Flux Schnell image generation model.\n    Do not forget to explicitly mention the image style provided in the setup, in each prompt so that the image generation model knows what to create.\n    '}], 'model': 'gpt-4o-mini', 'response_format': {'type': 'json_schema', 'json_schema': {'schema': {'properties': {'image_descriptions': {'description': 'A list of image descriptions, each must include explicitly mentioned image style. The image style must be exactly same in all image_descriptions.', 'items': {'type': 'string'}, 'title': 'Image Descriptions', 'type': 'array'}}, 'required': ['image_descriptions'], 'title': 'RevisedImageDescriptions', 'type': 'object', 'additionalProperties': False}, 'name': 'RevisedImageDescriptions', 'strict': True}}, 'stream': False}}
2024-11-01 12:47:37,317 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-11-01 12:47:37,318 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-11-01 12:47:37,318 - DEBUG - send_request_headers.complete
2024-11-01 12:47:37,318 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-11-01 12:47:37,318 - DEBUG - send_request_body.complete
2024-11-01 12:47:37,318 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-11-01 12:47:40,514 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 01 Nov 2024 07:47:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-oxujjlh0hncofhfy2iarhvkl'), (b'openai-processing-ms', b'2805'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'2000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'1998939'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'31ms'), (b'x-request-id', b'req_e20b6353dccaeb680afa53a31faef0ef'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8dba471b9c9e4bda-SIN'), (b'Content-Encoding', b'br'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-11-01 12:47:40,516 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-01 12:47:40,517 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-11-01 12:47:40,518 - DEBUG - receive_response_body.complete
2024-11-01 12:47:40,518 - DEBUG - response_closed.started
2024-11-01 12:47:40,518 - DEBUG - response_closed.complete
2024-11-01 12:47:40,519 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Fri, 01 Nov 2024 07:47:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-oxujjlh0hncofhfy2iarhvkl', 'openai-processing-ms': '2805', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '2000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '1998939', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '31ms', 'x-request-id': 'req_e20b6353dccaeb680afa53a31faef0ef', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8dba471b9c9e4bda-SIN', 'content-encoding': 'br', 'alt-svc': 'h3=":443"; ma=86400'})
2024-11-01 12:47:40,519 - DEBUG - request_id: req_e20b6353dccaeb680afa53a31faef0ef
2024-11-01 12:47:40,524 - DEBUG - Generated description for image 0
2024-11-01 12:47:40,524 - INFO - Completed scene consistency generation for story: The Amusing Armadillo
2024-11-01 12:47:40,526 - DEBUG - Generated consistent scene descriptions
2024-11-01 12:47:40,527 - DEBUG - Saved updated story content in: D:\prac\CursorAI projs\Shortrocity - childstories\data\processed_data\stories\amusing_armadillo\amusing_armadillo.json

2024-11-01 12:47:40,528 - DEBUG - headers='{"X-Together-Client-User-Agent": "{\\"bindings_version\\": \\"1.3.3\\", \\"httplib\\": \\"requests\\", \\"lang\\": \\"python\\", \\"lang_version\\": \\"3.12.7\\", \\"platform\\": \\"Windows-11-10.0.22631-SP0\\", \\"publisher\\": \\"together\\", \\"uname\\": \\"Windows 11 10.0.22631 AMD64 Intel64 Family 6 Model 183 Stepping 1, GenuineIntel\\"}", "Authorization": "Bearer e2b1347cae68ee5438039b6207fe909918ee67ce2fd464f095c61013a32254be", "User-Agent": "Together/v1 PythonBindings/1.3.3", "Content-Type": "application/json"}' message='Request to Together API' method=POST path=https://api.together.xyz/v1/images/generations post_data='{"prompt": "In a vibrant desert landscape under the midday sun, a whimsical armadillo named Andy rolls into a ball, showcasing his playful personality with a broad smile and twinkling eyes. His polished light brown shell is adorned with subtle patterns that resemble sand ripples. Cacti and small desert flowers in the background introduce bright colors amidst the sandy terrain, embodying the lively essence of the scene. The image style is whimsical and colorful, resembling a playful cartoon style that captures the lively essence of Andy\'s character and the desert ambiance.", "model": "black-forest-labs/FLUX.1-schnell-Free", "steps": 4, "n": 1, "height": 1792, "width": 1024, "response_format": "b64_json"}'
2024-11-01 12:47:40,528 - DEBUG - Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
2024-11-01 12:47:40,530 - DEBUG - Starting new HTTPS connection (1): api.together.xyz:443
2024-11-01 12:47:43,939 - DEBUG - https://api.together.xyz:443 "POST /v1/images/generations HTTP/11" 200 None
2024-11-01 12:47:44,351 - DEBUG - message='Together API response' path=https://api.together.xyz/v1/images/generations processing_ms=None request_id=8dba473228a4a8f4-SIN response_code=200
2024-11-01 12:47:44,355 - INFO - Generated image 1 for amusing_armadillo
2024-11-01 12:47:44,356 - DEBUG - headers='{"X-Together-Client-User-Agent": "{\\"bindings_version\\": \\"1.3.3\\", \\"httplib\\": \\"requests\\", \\"lang\\": \\"python\\", \\"lang_version\\": \\"3.12.7\\", \\"platform\\": \\"Windows-11-10.0.22631-SP0\\", \\"publisher\\": \\"together\\", \\"uname\\": \\"Windows 11 10.0.22631 AMD64 Intel64 Family 6 Model 183 Stepping 1, GenuineIntel\\"}", "Authorization": "Bearer e2b1347cae68ee5438039b6207fe909918ee67ce2fd464f095c61013a32254be", "User-Agent": "Together/v1 PythonBindings/1.3.3", "Content-Type": "application/json"}' message='Request to Together API' method=POST path=https://api.together.xyz/v1/images/generations post_data='{"prompt": "Andy the Armadillo is humorously performing a comedic act on a small rock, using a cactus as a makeshift microphone. Surrounding him are various desert animals, including a chuckling coyote, a clapping rabbit, and a group of giggling lizards, all with expressive faces reflecting joy. The scene is filled with laughter and vibrant colors, enhancing the cheerful mood of Andy\'s performance. The image style is whimsical and colorful, resembling a playful cartoon style that captures the lively essence of Andy\'s character and the desert ambiance.", "model": "black-forest-labs/FLUX.1-schnell-Free", "steps": 4, "n": 1, "height": 1792, "width": 1024, "response_format": "b64_json"}'
2024-11-01 12:47:44,741 - DEBUG - https://api.together.xyz:443 "POST /v1/images/generations HTTP/11" 429 325
2024-11-01 12:47:44,742 - DEBUG - message='Encountered requests.exceptions.HTTPError. Error code: 429'
2024-11-01 12:47:44,742 - DEBUG - message='4 retries left'
2024-11-01 12:47:45,672 - DEBUG - headers='{"X-Together-Client-User-Agent": "{\\"bindings_version\\": \\"1.3.3\\", \\"httplib\\": \\"requests\\", \\"lang\\": \\"python\\", \\"lang_version\\": \\"3.12.7\\", \\"platform\\": \\"Windows-11-10.0.22631-SP0\\", \\"publisher\\": \\"together\\", \\"uname\\": \\"Windows 11 10.0.22631 AMD64 Intel64 Family 6 Model 183 Stepping 1, GenuineIntel\\"}", "Authorization": "Bearer e2b1347cae68ee5438039b6207fe909918ee67ce2fd464f095c61013a32254be", "User-Agent": "Together/v1 PythonBindings/1.3.3", "Content-Type": "application/json"}' message='Request to Together API' method=POST path=https://api.together.xyz/v1/images/generations post_data='{"prompt": "Andy the Armadillo is humorously performing a comedic act on a small rock, using a cactus as a makeshift microphone. Surrounding him are various desert animals, including a chuckling coyote, a clapping rabbit, and a group of giggling lizards, all with expressive faces reflecting joy. The scene is filled with laughter and vibrant colors, enhancing the cheerful mood of Andy\'s performance. The image style is whimsical and colorful, resembling a playful cartoon style that captures the lively essence of Andy\'s character and the desert ambiance.", "model": "black-forest-labs/FLUX.1-schnell-Free", "steps": 4, "n": 1, "height": 1792, "width": 1024, "response_format": "b64_json"}'
2024-11-01 12:47:46,009 - DEBUG - https://api.together.xyz:443 "POST /v1/images/generations HTTP/11" 429 325
2024-11-01 12:47:46,010 - DEBUG - message='Encountered requests.exceptions.HTTPError. Error code: 429'
2024-11-01 12:47:46,011 - DEBUG - message='3 retries left'
2024-11-01 12:47:47,710 - DEBUG - headers='{"X-Together-Client-User-Agent": "{\\"bindings_version\\": \\"1.3.3\\", \\"httplib\\": \\"requests\\", \\"lang\\": \\"python\\", \\"lang_version\\": \\"3.12.7\\", \\"platform\\": \\"Windows-11-10.0.22631-SP0\\", \\"publisher\\": \\"together\\", \\"uname\\": \\"Windows 11 10.0.22631 AMD64 Intel64 Family 6 Model 183 Stepping 1, GenuineIntel\\"}", "Authorization": "Bearer e2b1347cae68ee5438039b6207fe909918ee67ce2fd464f095c61013a32254be", "User-Agent": "Together/v1 PythonBindings/1.3.3", "Content-Type": "application/json"}' message='Request to Together API' method=POST path=https://api.together.xyz/v1/images/generations post_data='{"prompt": "Andy the Armadillo is humorously performing a comedic act on a small rock, using a cactus as a makeshift microphone. Surrounding him are various desert animals, including a chuckling coyote, a clapping rabbit, and a group of giggling lizards, all with expressive faces reflecting joy. The scene is filled with laughter and vibrant colors, enhancing the cheerful mood of Andy\'s performance. The image style is whimsical and colorful, resembling a playful cartoon style that captures the lively essence of Andy\'s character and the desert ambiance.", "model": "black-forest-labs/FLUX.1-schnell-Free", "steps": 4, "n": 1, "height": 1792, "width": 1024, "response_format": "b64_json"}'
2024-11-01 12:47:48,039 - DEBUG - https://api.together.xyz:443 "POST /v1/images/generations HTTP/11" 429 325
2024-11-01 12:47:48,040 - DEBUG - message='Encountered requests.exceptions.HTTPError. Error code: 429'
2024-11-01 12:47:48,041 - DEBUG - message='2 retries left'
2024-11-01 12:47:51,562 - DEBUG - headers='{"X-Together-Client-User-Agent": "{\\"bindings_version\\": \\"1.3.3\\", \\"httplib\\": \\"requests\\", \\"lang\\": \\"python\\", \\"lang_version\\": \\"3.12.7\\", \\"platform\\": \\"Windows-11-10.0.22631-SP0\\", \\"publisher\\": \\"together\\", \\"uname\\": \\"Windows 11 10.0.22631 AMD64 Intel64 Family 6 Model 183 Stepping 1, GenuineIntel\\"}", "Authorization": "Bearer e2b1347cae68ee5438039b6207fe909918ee67ce2fd464f095c61013a32254be", "User-Agent": "Together/v1 PythonBindings/1.3.3", "Content-Type": "application/json"}' message='Request to Together API' method=POST path=https://api.together.xyz/v1/images/generations post_data='{"prompt": "Andy the Armadillo is humorously performing a comedic act on a small rock, using a cactus as a makeshift microphone. Surrounding him are various desert animals, including a chuckling coyote, a clapping rabbit, and a group of giggling lizards, all with expressive faces reflecting joy. The scene is filled with laughter and vibrant colors, enhancing the cheerful mood of Andy\'s performance. The image style is whimsical and colorful, resembling a playful cartoon style that captures the lively essence of Andy\'s character and the desert ambiance.", "model": "black-forest-labs/FLUX.1-schnell-Free", "steps": 4, "n": 1, "height": 1792, "width": 1024, "response_format": "b64_json"}'
2024-11-01 12:47:54,226 - DEBUG - https://api.together.xyz:443 "POST /v1/images/generations HTTP/11" 422 142
2024-11-01 12:47:54,226 - DEBUG - message='Together API response' path=https://api.together.xyz/v1/images/generations processing_ms=None request_id=8dba4774aa6ea8f4-SIN response_code=422
2024-11-01 12:47:54,227 - INFO - error_code=None error_message='image may contain NSFW content' error_param=None error_type=invalid_request_error message='Together API error received' stream_error=False
2024-11-01 12:47:54,227 - ERROR - Error generating image 2 for amusing_armadillo: Error code: 422 - {"message": "image may contain NSFW content", "type_": "invalid_request_error"}
2024-11-01 12:47:54,227 - ERROR - Error processing story amusing_armadillo.json: Error code: 422 - {"message": "image may contain NSFW content", "type_": "invalid_request_error"}
2024-11-01 12:47:54,227 - ERROR - Fatal error in story processing: Error code: 422 - {"message": "image may contain NSFW content", "type_": "invalid_request_error"}
2024-11-01 12:47:54,265 - DEBUG - close.started
2024-11-01 12:47:54,266 - DEBUG - close.complete
